# ==============================================================================
# Prompt Configuration
# ==============================================================================

# Enable parameter expansion and command substitution in prompts
setopt PROMPT_SUBST

# ==============================================================================
# Colors
# ==============================================================================

local cyan='%F{cyan}'
local gray='%F{240}'
local yellow='%F{yellow}'
local green='%F{green}'
local reset='%f'

# ==============================================================================
# Command Timer Hooks
# ==============================================================================

# Hook: runs before each command execution - capture start time
preexec() {
    timer_start=$SECONDS
}

# Hook: runs after command completion - calculate elapsed time
precmd() {
    if [ -n "$timer_start" ]; then
        local elapsed_seconds=$((SECONDS - timer_start))
        if [ $elapsed_seconds -gt 0 ]; then
            timer_display="${elapsed_seconds}s"
        else
            timer_display=""
        fi
        unset timer_start
    else
        timer_display=""
    fi
}

# ==============================================================================
# Prompt Definition
# ==============================================================================

PROMPT="${cyan}%~${reset}"                                      # current directory
PROMPT+=" ${gray}%*${reset}"                                    # current time
PROMPT+='${timer_display:+ ${yellow}${timer_display}${reset}}' # elapsed time (if set)
PROMPT+=" ${green}â†’${reset} "                                   # prompt symbol
